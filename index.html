<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ConTracker - Anime & Cosplay Events</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #ffffff;
            color: #1a1a1a;
            line-height: 1.5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 60px 20px;
        }

        .auth-section {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
        }

        .auth-button {
            background: #1a1a1a;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin-left: 8px;
        }

        .auth-button:hover {
            background: #333;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
            background: #f8f8f8;
            padding: 12px 20px;
            border-radius: 8px;
        }

        .user-stats {
            display: flex;
            gap: 20px;
            font-size: 14px;
            color: #666;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .stat-number {
            font-weight: 600;
            color: #1a1a1a;
        }

        header {
            text-align: center;
            margin-bottom: 60px;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 8px;
            letter-spacing: -0.02em;
        }

        .subtitle {
            color: #666;
            font-size: 1.1rem;
            font-weight: 400;
        }

        .search-section {
            max-width: 400px;
            margin: 0 auto 60px auto;
        }

        .search-input {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid #e5e5e5;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.2s ease;
            background: #fff;
        }

        .search-input:focus {
            outline: none;
            border-color: #333;
        }

        .events-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 24px;
            max-width: 800px;
            margin: 0 auto;
        }

        .event-card {
            background: #fff;
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid #f0f0f0;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            position: relative;
        }

        .event-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
        }

        .event-card.planning {
            border-color: #22c55e;
            background: linear-gradient(135deg, #f0fdf4 0%, #ffffff 100%);
        }

        .event-card.skipped {
            border-color: #ef4444;
            background: linear-gradient(135deg, #fef2f2 0%, #ffffff 100%);
            opacity: 0.7;
        }

        .status-badge {
            position: absolute;
            top: 16px;
            right: 16px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-badge.planning {
            background: #22c55e;
            color: white;
        }

        .status-badge.skipped {
            background: #ef4444;
            color: white;
        }

        .event-image {
            width: 100%;
            height: 200px;
            background: #f8f8f8;
            object-fit: cover;
        }

        .event-content {
            padding: 24px;
        }

        .event-date {
            font-size: 14px;
            color: #666;
            font-weight: 500;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .event-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: #1a1a1a;
        }

        .event-location {
            color: #666;
            font-size: 14px;
            margin-bottom: 16px;
        }

        .event-description {
            color: #444;
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .event-actions {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
        }

        .action-button {
            border: 1px solid;
            border-radius: 6px;
            background: none;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
        }

        .plan-button {
            flex: 3;
            padding: 10px 16px;
            border-color: #22c55e;
            color: #22c55e;
        }

        .plan-button:hover, .plan-button.active {
            background: #22c55e;
            color: white;
        }

        .skip-button {
            flex: 1;
            padding: 6px 8px;
            border-color: #d1d5db;
            color: #6b7280;
            font-size: 11px;
        }

        .skip-button:hover, .skip-button.active {
            background: #ef4444;
            border-color: #ef4444;
            color: white;
        }

        .event-link {
            color: #666;
            text-decoration: none;
            font-size: 13px;
            font-weight: 400;
            transition: color 0.2s ease;
        }

        .event-link:hover {
            color: #1a1a1a;
        }

        .stats {
            text-align: center;
            margin-bottom: 40px;
            color: #666;
            font-size: 14px;
        }

        .no-events {
            text-align: center;
            color: #666;
            font-size: 16px;
            margin-top: 80px;
            padding: 40px;
        }

        .login-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .login-form {
            background: white;
            padding: 40px;
            border-radius: 12px;
            max-width: 400px;
            width: 90%;
        }

        .login-form h2 {
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e5e5;
            border-radius: 6px;
            font-size: 16px;
        }

        .form-buttons {
            display: flex;
            gap: 12px;
        }

        .form-buttons button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
        }

        .primary-button {
            background: #1a1a1a;
            color: white;
        }

        .secondary-button {
            background: #f0f0f0;
            color: #1a1a1a;
        }

        .guest-notice {
            background: linear-gradient(90deg, #f0f9ff 0%, #e0f2fe 100%);
            border: 1px solid #bae6fd;
            padding: 20px 24px;
            border-radius: 12px;
            margin-bottom: 40px;
            font-size: 15px;
            color: #0369a1;
            text-align: center;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1);
        }

        .notice-title {
            font-weight: 600;
            color: #0c4a6e;
            margin-bottom: 4px;
            font-size: 16px;
        }

        .notice-subtitle {
            color: #0369a1;
            font-size: 14px;
            opacity: 0.9;
        }

        @media (max-width: 768px) {
            .container {
                padding: 40px 16px;
            }

            .auth-section {
                position: static;
                margin-bottom: 20px;
                text-align: center;
            }

            h1 {
                font-size: 2rem;
            }

            .events-grid {
                grid-template-columns: 1fr;
                gap: 24px;
            }

            .event-content {
                padding: 20px;
            }

            .user-stats {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="auth-section" id="authSection">
        <!-- Auth buttons will be populated here -->
    </div>

    <div class="container">
        <div id="guestNotice" class="guest-notice" style="display: none;">
            <div class="notice-title">ðŸŽ¯ Build Your Convention Journey</div>
            <div class="notice-subtitle">Log in to save events you're planning to attend and track your progress</div>
        </div>

        <header>
            <h1>ConTracker</h1>
            <p class="subtitle">Plan your anime & cosplay convention journey</p>
        </header>

        <div class="search-section">
            <input 
                type="text" 
                id="countrySearch" 
                class="search-input" 
                placeholder="Search by country..."
            >
        </div>

        <div class="stats" id="eventCount">
            Loading events...
        </div>

        <div class="events-grid" id="eventsGrid">
            <!-- Events will be populated here -->
        </div>

        <div class="no-events" id="noEvents" style="display: none;">
            <p>No events found for your search</p>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="login-modal" style="display: none;">
        <div class="login-form">
            <h2 id="formTitle">Sign In</h2>
            <form id="authForm">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" required>
                </div>
                <div class="form-group" id="emailGroup" style="display: none;">
                    <label for="email">Email</label>
                    <input type="email" id="email">
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" required>
                </div>
                <div class="form-buttons">
                    <button type="submit" class="primary-button" id="submitButton">Sign In</button>
                    <button type="button" class="secondary-button" id="cancelButton">Cancel</button>
                </div>
                <div style="text-align: center; margin-top: 16px;">
                    <button type="button" id="switchMode" style="background: none; border: none; color: #666; text-decoration: underline; cursor: pointer;">
                        Don't have an account? Sign up
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // User management
        let currentUser = null;
        let userPreferences = JSON.parse(localStorage.getItem('userPreferences')) || {};
        let isSignupMode = false;

        // Sample events data
        const eventsData = [
            {
                id: 1,
                name: "AnimeXpo 2025",
                date: "2025-08-15",
                endDate: "2025-08-17",
                city: "Stockholm",
                country: "Sweden",
                venue: "Stockholm International Fairs",
                description: "The largest anime convention in Scandinavia featuring international voice actors, exclusive premieres, cosplay mastery workshops, and over 200 vendor booths. Three days of panels, concerts, gaming tournaments, and cultural exhibitions celebrating Japanese pop culture.",
                website: "https://example.com/animexpo",
                image: "images/con1.jpg"
            },
            {
                id: 2,
                name: "Nordic Cosplay Championship",
                date: "2025-09-12",
                endDate: "2025-09-12",
                city: "Stockholm",
                country: "Sweden",
                venue: "Kulturhuset",
                description: "Annual Nordic cosplay championship bringing together the region's most talented costume makers and performers. Features individual and group competitions, craftsmanship judging, photography meetups, and workshops on prop making, makeup techniques, and performance skills.",
                website: "https://example.com/nordiccosplay",
                image: "images/con2.jpg"
            },
            {
                id: 3,
                name: "Manga Festival Stockholm",
                date: "2025-10-05",
                endDate: "2025-10-06",
                city: "Stockholm",
                country: "Sweden",
                venue: "Stockholm City Conference Centre",
                description: "Two-day celebration of manga culture featuring original artist exhibitions, live drawing demonstrations, manga reading corners, and publisher showcases. Meet indie creators, participate in collaborative art projects, and discover both classic series and upcoming releases from Japanese and Nordic publishers.",
                website: "https://example.com/mangafest",
                image: "images/con3.jpg"
            },
            {
                id: 4,
                name: "GameCon Stockholm",
                date: "2025-11-20",
                endDate: "2025-11-22",
                city: "Stockholm",
                country: "Sweden",
                venue: "StockholmsmÃ¤ssan",
                description: "Three-day gaming extravaganza showcasing the latest releases, retro gaming areas, esports tournaments, and developer meet-and-greets. Features indie game showcases, VR experiences, tabletop gaming zones, and exclusive preview access to upcoming titles from major studios.",
                website: "https://example.com/gamecon",
                image: "images/con4.jpg"
            },
            {
                id: 5,
                name: "Winter Anime Festival",
                date: "2025-12-15",
                endDate: "2025-12-16",
                city: "Gothenburg",
                country: "Sweden",
                venue: "Svenska MÃ¤ssan",
                description: "Cozy winter-themed anime convention featuring holiday cosplay competitions, seasonal anime screenings, winter festival activities, and themed cafÃ©s. Special focus on slice-of-life and romance series, with hot chocolate bars, winter craft workshops, and a magical snow-themed cosplay contest.",
                website: "https://example.com/winteranime",
                image: "images/con5.jpg"
            },
            {
                id: 6,
                name: "Comic & Anime Expo MalmÃ¶",
                date: "2025-09-28",
                endDate: "2025-09-29",
                city: "MalmÃ¶",
                country: "Sweden",
                venue: "MalmÃ¶ Arena",
                description: "Southern Sweden's premier pop culture celebration combining anime, manga, comics, and gaming. Features international guest speakers, artist alleys, comic book signings, anime premiere screenings, and interactive gaming areas. Perfect blend of Eastern and Western pop culture traditions.",
                website: "https://example.com/malmoexpo",
                image: "images/con6.jpg"
            },
            {
                id: 7,
                name: "Anime North",
                date: "2025-08-22",
                endDate: "2025-08-24",
                city: "Toronto",
                country: "Canada",
                venue: "Toronto Congress Centre",
                description: "Canada's largest anime convention drawing fans from across North America. Features Japanese voice actor guests, exclusive screening rooms, massive dealer halls, cultural workshops, traditional Japanese performances, and one of the continent's biggest cosplay contests with professional judging.",
                website: "https://example.com/animenorth",
                image: "images/con7.jpg"
            },
            {
                id: 8,
                name: "Japan Expo",
                date: "2025-09-05",
                endDate: "2025-09-08",
                city: "Paris",
                country: "France",
                venue: "Paris Nord Villepinte",
                description: "Europe's largest celebration of Japanese culture spanning four days of immersive experiences. From traditional tea ceremony demonstrations and martial arts exhibitions to the latest anime premieres and J-pop concerts. Features authentic Japanese food courts, cultural exchanges, and massive exhibition halls.",
                website: "https://example.com/japanexpo",
                image: "images/con8.jpg"
            }
        ];

        function showLoginModal() {
            document.getElementById('loginModal').style.display = 'flex';
        }

        function hideLoginModal() {
            document.getElementById('loginModal').style.display = 'none';
            isSignupMode = false;
            updateModalMode();
        }

        function updateModalMode() {
            const title = document.getElementById('formTitle');
            const emailGroup = document.getElementById('emailGroup');
            const submitButton = document.getElementById('submitButton');
            const switchMode = document.getElementById('switchMode');

            if (isSignupMode) {
                title.textContent = 'Register';
                emailGroup.style.display = 'block';
                submitButton.textContent = 'Register';
                switchMode.textContent = 'Already have an account? Log in';
            } else {
                title.textContent = 'Log In';
                emailGroup.style.display = 'none';
                submitButton.textContent = 'Log In';
                switchMode.textContent = "Don't have an account? Register";
            }
        }

        function updateAuthSection() {
            const authSection = document.getElementById('authSection');
            const guestNotice = document.getElementById('guestNotice');
            
            if (currentUser) {
                const planned = Object.values(userPreferences[currentUser] || {}).filter(status => status === 'planning').length;
                const skipped = Object.values(userPreferences[currentUser] || {}).filter(status => status === 'skipped').length;
                
                authSection.innerHTML = `
                    <div class="user-info">
                        <strong>Welcome, ${currentUser}!</strong>
                        <div class="user-stats">
                            <div class="stat-item">
                                <span style="color: #22c55e;">âœ“</span>
                                <span class="stat-number">${planned}</span>
                                <span>Planning</span>
                            </div>
                            <div class="stat-item">
                                <span style="color: #ef4444;">âœ—</span>
                                <span class="stat-number">${skipped}</span>
                                <span>Skipped</span>
                            </div>
                        </div>
                        <button class="auth-button" onclick="signOut()">Sign Out</button>
                    </div>
                `;
                guestNotice.style.display = 'none';
            } else {
                authSection.innerHTML = `
                    <button class="auth-button" onclick="showLoginModal()">Log In</button>
                    <button class="auth-button" onclick="isSignupMode = true; updateModalMode(); showLoginModal()">Register</button>
                `;
                guestNotice.style.display = 'block';
            }
        }

        function signOut() {
            currentUser = null;
            updateAuthSection();
            renderEvents(filteredEvents);
        }

        function handleEventAction(eventId, action) {
            if (!currentUser) {
                showLoginModal();
                return;
            }

            if (!userPreferences[currentUser]) {
                userPreferences[currentUser] = {};
            }

            if (userPreferences[currentUser][eventId] === action) {
                delete userPreferences[currentUser][eventId];
            } else {
                userPreferences[currentUser][eventId] = action;
            }

            localStorage.setItem('userPreferences', JSON.stringify(userPreferences));
            updateAuthSection();
            renderEvents(filteredEvents);
        }

        function formatDate(dateStr, endDateStr) {
            const startDate = new Date(dateStr);
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            
            if (endDateStr && endDateStr !== dateStr) {
                const endDate = new Date(endDateStr);
                if (startDate.getMonth() === endDate.getMonth()) {
                    return `${startDate.getDate()}-${endDate.getDate()} ${startDate.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}`;
                } else {
                    return `${startDate.toLocaleDateString('en-US', options)} - ${endDate.toLocaleDateString('en-US', options)}`;
                }
            }
            
            return startDate.toLocaleDateString('en-US', options);
        }

        function renderEvents(events) {
            const eventsGrid = document.getElementById('eventsGrid');
            const noEvents = document.getElementById('noEvents');
            const eventCount = document.getElementById('eventCount');

            if (events.length === 0) {
                eventsGrid.innerHTML = '';
                noEvents.style.display = 'block';
                eventCount.textContent = 'No events found';
                return;
            }

            noEvents.style.display = 'none';
            eventCount.textContent = `${events.length} event${events.length === 1 ? '' : 's'} found`;
            
            eventsGrid.innerHTML = events.map(event => {
                const userStatus = currentUser && userPreferences[currentUser] ? userPreferences[currentUser][event.id] : null;
                const cardClass = userStatus ? ` ${userStatus}` : '';
                const statusBadge = userStatus ? `<div class="status-badge ${userStatus}">${userStatus === 'planning' ? 'Planning' : 'Skipped'}</div>` : '';
                
                return `
                    <div class="event-card${cardClass}">
                        ${statusBadge}
                        <img src="${event.image}" alt="${event.name}" class="event-image" />
                        <div class="event-content">
                            <div class="event-date">${formatDate(event.date, event.endDate)}</div>
                            <h3 class="event-title">${event.name}</h3>
                            <div class="event-location">${event.venue}, ${event.city}, ${event.country}</div>
                            <p class="event-description">${event.description}</p>
                            <div class="event-actions">
                                <button class="action-button plan-button ${userStatus === 'planning' ? 'active' : ''}" 
                                        onclick="handleEventAction(${event.id}, 'planning')">
                                    âœ“ Planning to go
                                </button>
                                <button class="action-button skip-button ${userStatus === 'skipped' ? 'active' : ''}" 
                                        onclick="handleEventAction(${event.id}, 'skipped')">
                                    âœ—
                                </button>
                            </div>
                            <a href="${event.website}" target="_blank" class="event-link">Visit website</a>
                        </div>
                    </div>
                `;
            }).join('');
        }

        let filteredEvents = [...eventsData];

        function filterEventsByCountry() {
            const searchTerm = document.getElementById('countrySearch').value.toLowerCase().trim();
            
            filteredEvents = eventsData;
            
            if (searchTerm) {
                filteredEvents = eventsData.filter(event => 
                    event.country.toLowerCase().includes(searchTerm)
                );
            }

            filteredEvents.sort((a, b) => new Date(a.date) - new Date(b.date));
            renderEvents(filteredEvents);
        }

        // Event listeners
        document.getElementById('countrySearch').addEventListener('input', filterEventsByCountry);

        document.getElementById('switchMode').addEventListener('click', () => {
            isSignupMode = !isSignupMode;
            updateModalMode();
        });

        document.getElementById('cancelButton').addEventListener('click', hideLoginModal);

        document.getElementById('authForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            if (username && password) {
                currentUser = username;
                hideLoginModal();
                updateAuthSection();
                renderEvents(filteredEvents);
                
                // Clear form
                document.getElementById('username').value = '';
                document.getElementById('password').value = '';
                document.getElementById('email').value = '';
            }
        });

        // Initialize
        const sortedEvents = [...eventsData].sort((a, b) => new Date(a.date) - new Date(b.date));
        filteredEvents = sortedEvents;
        updateAuthSection();
        renderEvents(sortedEvents);
    </script>
</body>
</html>